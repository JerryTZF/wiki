---
sidebar: [
{text: 'ğŸ“ äº‹ä»¶æœºåˆ¶', collapsible: true, children: [
{text: 'äº‹ä»¶è§’è‰²å’Œæ³¨æ„äº‹é¡¹', link: 'hyperf/component/event/event'},
{text: 'ä»£ç ç¤ºä¾‹', link: 'hyperf/component/event/code'},
]},
{text: 'â° å®šæ—¶ä»»åŠ¡', link: 'hyperf/component/crontab'},
{text: 'â›“ è‡ªå®šä¹‰è¿›ç¨‹', link: 'hyperf/component/process'},
{text: 'ğŸ“ æ–‡ä»¶ç³»ç»Ÿ', link: 'hyperf/component/filesystem'},
{text: 'ğŸ•“ ç¼“å­˜ç³»ç»Ÿ', link: 'hyperf/component/cache'},
{text: 'ğŸ“© å¼‚æ­¥é˜Ÿåˆ—', collapsible: true, children: [
{text: 'é˜Ÿåˆ—ä½¿ç”¨', link: 'hyperf/component/queue/overview'},
{text: 'æ³¨æ„äº‹é¡¹', link: 'hyperf/component/queue/info'},
]},
{text: 'ğŸš¦ ä¿¡å·å¤„ç†å™¨', link: 'hyperf/component/signal'},
{text: 'ğŸ“¤ GuzzleHttp', link: 'hyperf/component/guzzle'},
{text: 'ğŸ“‰ é™æµå™¨', link: 'hyperf/component/limit'},
{text: 'âŒ å¼‚å¸¸å¤„ç†å™¨', link: 'hyperf/component/exception'},
{text: 'ğŸ–¨ æ—¥å¿—', link: 'hyperf/component/log'},
{text: 'ğŸ“¡ å‘½ä»¤è¡Œ', link: 'hyperf/component/command'},
{text: 'ğŸ” WebSocket', link: 'hyperf/component/websocket'},
]

prev: /hyperf/hyperf_component
next: /hyperf/component/event/code

sidebarDepth: 3

---

# è§’è‰²åŠæ³¨æ„äº‹é¡¹

ç›®å½•
[[TOC]]

::: tip
- äº‹ä»¶æœºåˆ¶å…±åˆ†ä¸ºä¸‰ä¸ªè§’è‰²ï¼š**`è§¦å‘å™¨`** ã€ **`ç›‘å¬å™¨`** ã€ **`äº‹ä»¶`**ã€‚
- äº‹ä»¶å¯ä»¥åˆ†ä¸ºç³»ç»Ÿäº‹ä»¶ã€è‡ªå®šä¹‰äº‹ä»¶ï¼›å¯¹äºç³»ç»Ÿäº‹ä»¶ï¼Œå¯ä»¥ç›´æ¥å†™ç›‘å¬å™¨è¿›è¡Œç›‘å¬ï¼Œ[è¯¦è§å›¾](https://hyperf.wiki/3.0/zh-cn/imgs/hyperf-events.svg)
- å¯¹åº”å…³ç³»ï¼š![](https://img.tzf-foryou.xyz/img/20220321102539.png)
:::

::: warning ã€è§„èŒƒã€‘
å¾ˆå¤šç»„ä»¶æ˜¯è‡ªå¸¦ç›‘å¬å™¨ã€è§¦å‘å™¨ã€äº‹ä»¶çš„ï¼Œä¸€èˆ¬çš„ï¼Œè§¦å‘å™¨æ˜¯ä¸éœ€è¦æˆ‘ä»¬ä¿®æ”¹ï¼Œä¹Ÿä¸åº”è¯¥æˆ‘ä»¬ä¿®æ”¹çš„ï¼Œå› ä¸ºä¿®æ”¹è§¦å‘æ—¶æœºä¼šå½±å“è¯¥ç»„ä»¶çš„åŠŸèƒ½å’Œé€»è¾‘ï¼Œ
ä½†æ˜¯äº‹ä»¶å¹¶ä¸ä¸€å®šèƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œç›‘å¬å™¨åŒç†ã€‚é‚£ä¹ˆå°±éœ€è¦æˆ‘ä»¬ç¼–å†™è‡ªå·±çš„äº‹ä»¶å’Œç›‘å¬å™¨ï¼Œæˆ‘ä»¬ä¹Ÿåº”å½“éµå¾ªä»¥ä¸‹è§„èŒƒï¼š

1ã€åº”å½“åœ¨ `app` ç›®å½•ä¸‹åˆ›å»º `Hook` æˆ–è€… `Event` ç›®å½•ï¼ŒåŒæ—¶åˆ›å»º `Listener` ç›®å½•ã€‚ \
2ã€ç³»ç»Ÿæä¾›çš„ç›‘å¬å™¨åº”å½“åœ¨ `config/autoload/listeners` ä¸­å£°æ˜ï¼›è‡ªå®šä¹‰ç›‘å¬å™¨åœ¨ `app/Listener` ä¸­åˆ›å»ºï¼Œå¹¶ä¸”ä½¿ç”¨æ³¨è§£è¿›è¡Œå£°æ˜ã€‚ \
3ã€ç»„ä»¶æä¾›äº‹ä»¶ï¼Œä½†æ˜¯ç»„ä»¶çš„ç›‘å¬å™¨ä¸æ»¡è¶³éœ€æ±‚æ—¶ï¼Œå¯ä»¥è‡ªå®šä¹‰ç›‘å¬å™¨ç›‘å¬è¯¥äº‹ä»¶ï¼Œæ­¤æ—¶ä½ å¯ä»¥ç†è§£ä¸ºï¼šä¸€ä¸ªç»„ä»¶è¢«å¤šä¸ªç›‘å¬å™¨ç›‘å¬ï¼Œåªè¦å®ƒè¢«è§¦å‘ã€‚\
4ã€è‡ªå®šä¹‰äº‹ä»¶å¿…é¡»åœ¨è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ä¸­è§¦å‘ï¼Œä¸èƒ½åœ¨åŒ…ä¸­è§¦å‘(ä¸€èˆ¬äººä¹Ÿä¸ä¼šè¿™ä¹ˆå¹² :cry: )

:::

---
## äº‹ä»¶

äº‹ä»¶`(Event)`å¯ä»¥ç†è§£ä¸ºï¼š`é’©å­(Hook)` :hook: æˆ–è€… `é”šç‚¹(Anchor)` :anchor: \
åœ¨éœ€è¦çš„åœ°æ–¹ï¼Œå¯ä»¥åŸ‹å…¥é€‚åˆå½“å‰åœºæ™¯çš„**é’©å­**ï¼›æ‰§è¡Œå½“å‰åœºæ™¯æ—¶ï¼Œå¯ä»¥é€šè¿‡é’©å­ï¼Œè§¦å‘`ç›‘å¬è¯¥é’©å­çš„æ‰€æœ‰çš„ç›‘å¬å™¨`æ‰§è¡Œä¸šåŠ¡é€»è¾‘ã€‚


## è§¦å‘å™¨(äº‹ä»¶è°ƒåº¦å™¨)

æˆ‘ä»¬æ­¤æ—¶å·²ç»çŸ¥é“é’©å­çš„ä½œç”¨ï¼Œé‚£ä¹ˆé’©å­å’Œç›‘å¬å™¨ä¹‹é—´æ˜¯å¦‚ä½•è”ç³»èµ·æ¥çš„å‘¢ï¼Ÿè¿™é‡Œå°±éœ€è¦è§¦å‘å™¨å®ç°ï¼Œç”±ä¸Šå›¾çœ‹å‡ºï¼Œä¸€ä¸ªè§¦å‘å™¨å¯ä»¥è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œ
åªæœ‰å½“è§¦å‘å™¨è§¦å‘äº‹ä»¶åï¼Œç›‘å¬è¯¥äº‹ä»¶(é’©å­)çš„ç›‘å¬å™¨æ‰å¯ä»¥æ­£å¸¸ç›‘å¬åˆ°è¯¥äº‹ä»¶ï¼Œæ‰€ä»¥ï¼Œ**åªæœ‰è§¦å‘å™¨(äº‹ä»¶è°ƒåº¦å™¨)è§¦å‘è¯¥äº‹ä»¶ï¼Œç›‘å¬è¯¥äº‹ä»¶çš„ç›‘å¬å™¨æ‰ä¼šç”Ÿæ•ˆ!!!**

## ç›‘å¬å™¨

ç›‘å¬å™¨æ˜¯è§¦å‘äº‹ä»¶åä¸šåŠ¡é€»è¾‘å®ç°çš„åœ°æ–¹ï¼Œåœ¨ç›‘å¬äº‹ä»¶æ—¶ï¼Œä¸€å®šè¦æ³¨æ„äº‹ä»¶æ˜¯å¦è¢«è§¦å‘ï¼Œä¸ç„¶ä¸ä¼šè¢«ç›‘å¬å™¨ç›‘å¬åˆ°ã€‚ä¸åŒçš„ç›‘å¬å™¨åº”è¯¥æ˜¯è´£ä»»æ¸…æ™°çš„ï¼Œ
åˆ‡ä¸å¯æŠŠæ‰€æœ‰çš„ä¸åŒæƒ…å†µä¸‹ä¸šåŠ¡é€»è¾‘å†™åˆ°ä¸€ä¸ªç›‘å¬å™¨ä¸­ï¼Œç›´æ¥æ¢­å“ˆï¼›ä¾‹å¦‚æ³¨å†Œåè§¦å‘çŸ­ä¿¡ã€Emailå‘é€ï¼Œè™½ç„¶å†™åœ¨ä¸€ä¸ªç›‘å¬å™¨ä¸­å¯ä»¥å®ç°ï¼Œä½†æ˜¯è¿™ç§æ˜¯
ä¸ä¼˜é›…çš„ï¼Œæ²¡æœ‰å¼„æ˜ç™½ä¸ºä»€ä¹ˆè¦ç”¨äº‹ä»¶æœºåˆ¶çš„ã€‚

## æ³¨æ„äº‹é¡¹

- `äº‹ä»¶(é’©å­)` ä¸ `ç›‘å¬å™¨` ä¹‹é—´æ˜¯ `å¤šå¯¹å¤š` çš„å…³ç³»ã€‚å³ï¼šä¸€ä¸ªäº‹ä»¶å¯ä»¥è¢«å¤šä¸ªç›‘å¬å™¨ç›‘å¬ï¼Œä¾‹å¦‚`æ³¨å†Œäº‹ä»¶`ï¼Œå¯ä»¥æœ‰`æ³¨å†Œåå‘é‚®ä»¶ç›‘å¬å™¨`ã€`æ³¨å†Œåå‘çŸ­ä¿¡ç›‘å¬å™¨`
  ç­‰ç­‰ã€‚å¤šä¸ªäº‹ä»¶è¢«ä¸€ä¸ªç›‘å¬å™¨ç›‘å¬ï¼Œä¾‹å¦‚`æœåŠ¡å¯åŠ¨å‰äº‹ä»¶`ã€`æœåŠ¡å¯åŠ¨æˆåŠŸäº‹ä»¶`ã€`æœåŠ¡é€€å‡ºåäº‹ä»¶`ï¼Œè¢«ä¸€ä¸ªç›‘å¬å™¨ç›‘å¬ï¼Œå¯¹äºä¸åŒçš„äº‹ä»¶åšå‡ºä¸åŒçš„ä¸šåŠ¡é€»è¾‘å¤„ç†ã€‚
- äº‹ä»¶ä¸€å®šè¦æŒ‰ç…§æŸç§è§„åˆ™è¿›è¡Œåˆ’åˆ†ï¼Œå¸¸è§çš„ï¼š`xxxå‰`ã€`xxxæˆåŠŸ` ã€`xxxå`ã€‚å…¶æ¬¡ï¼Œäº‹ä»¶çš„ç›‘å¬å™¨å¦‚æœåªæœ‰ä¸€ä¸ªï¼Œé‚£ä¹ˆæŠŠä¸šåŠ¡é€»è¾‘åŒæ­¥å†™åœ¨å¯¹åº”çš„ä½ç½®ä¹Ÿæ²¡ä»€ä¹ˆä¸å¯ã€‚
  æ‰€ä»¥ç›‘å¬å™¨çš„ä¼˜åŠ¿å°±åœ¨äºï¼š**ä¸€ä¸ªèŠ‚ç‚¹è§¦å‘å¤šç§é€»è¾‘ï¼Œå¤šç§é€»è¾‘å¯ä»¥æ¸…æ™°çš„æ”¾åœ¨ä¸åŒçš„ç›‘å¬å™¨ä¸­æ‰§è¡Œï¼Œè€Œé’©å­æ‰€åœ¨å¤„ä»£ç æ— éœ€å˜æ›´ï¼Œæœ¬è´¨ä¸Šæ˜¯è§£è€¦ã€‚**
- å¾ˆå¤šçš„ç³»ç»Ÿäº‹ä»¶å·²ç»è¢«è§¦å‘å™¨è§¦å‘(å¾ˆå¤šç»„ä»¶å†…ä¹Ÿæ˜¯å£°æ˜äº†äº‹ä»¶ç„¶åè§¦å‘ï¼Œå¹¶ä¸”æœ‰å¯¹åº”ç›‘å¬å™¨å¯¹å…¶ç›‘å¬)ï¼Œåªéœ€è¦æ·»åŠ è‡ªå·±çš„ç›‘å¬å™¨å³å¯ï¼Œ
  ä½†æ˜¯æœ‰ä¸€äº›æ˜¯ä¸åœ¨åç¨‹ç¯å¢ƒä¸‹è§¦å‘ï¼Œæ‰€ä»¥åœ¨ç›‘å¬ç³»ç»Ÿäº‹ä»¶æ—¶ï¼Œä¸€å®šè¦æ³¨æ„æ˜¯å¦æ˜¯åç¨‹å®‰å…¨ã€‚

::: danger ã€æ ¼å¤–æ³¨æ„ã€‘
> 1ã€ä¸è¦åœ¨ `Listener` ä¸­æ³¨å…¥ `EventDispatcherInterface`

å› ä¸º EventDispatcherInterface ä¾èµ–äº ListenerProviderInterfaceï¼Œè€Œ ListenerProviderInterface åˆå§‹åŒ–çš„åŒæ—¶ï¼Œä¼šæ”¶é›†æ‰€æœ‰çš„ Listenerã€‚
è€Œå¦‚æœ Listener åˆä¾èµ–äº† EventDispatcherInterfaceï¼Œå°±ä¼šå¯¼è‡´å¾ªåä¾èµ–ï¼Œè¿›è€Œå¯¼è‡´å†…å­˜æº¢å‡º

> 2ã€æœ€å¥½åªåœ¨ `Listener` ä¸­æ³¨å…¥ `ContainerInterface`

æœ€å¥½åªåœ¨ Listener ä¸­æ³¨å…¥ ContainerInterfaceï¼Œè€Œå…¶ä»–çš„ç»„ä»¶åœ¨ process ä¸­é€šè¿‡ container è·å–ã€‚æ¡†æ¶å¯åŠ¨å¼€å§‹æ—¶ï¼Œä¼šå®ä¾‹åŒ– EventDispatcherInterfaceï¼Œè¿™ä¸ªæ—¶å€™è¿˜ä¸æ˜¯åç¨‹ç¯å¢ƒï¼Œå¦‚æœ Listener ä¸­æ³¨å…¥äº†å¯èƒ½ä¼šè§¦å‘åç¨‹åˆ‡æ¢çš„ç±»ï¼Œå°±ä¼šå¯¼è‡´æ¡†æ¶å¯åŠ¨å¤±è´¥ã€‚
:::